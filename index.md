---
title       : A (very) brief introduction to R
subtitle    : June 21 2016
author      : Matthew Upson PhD
credit      : Arthur Lugtigheid PhD
job         : Data Scientist (ESEDD)
framework   : io2012        # {io2012, html5slides, shower, dzslides, ...}
highlighter : highlight.js  # {highlight.js, prettify, highlight}
hitheme     : tomorrow      # 
widgets     : []            # {mathjax, quiz, bootstrap}
mode        : selfcontained # {standalone, draft}
knit        : slidify::knit2slides
---

<style>

em {
  font-style: italic;
}

strong {
  font-weight: bold;
}

</style>

## Before we start...

* I can't teach you much in an hour...

* This session focusses on:
  * Some high level advice you might not hear elsewhere.
  * A very simple walthrough
  * Some advice for the future and where to get help

---

## Why R?

* R is free (["free" as in "free speech", not as in "free beer"](https://en.wikipedia.org/wiki/Gratis_versus_libre#.22Free_beer.22_vs_.22free_speech.22_distinction)).
* Growing popularity (part of SQL server 2016).
* Can talk to Hadoop and Spark (two very popular 'big data' technologies).
* Supported by an enormous and active community.


```r
# CRAN 'vetted' package
install.packages("dplyr")
library(dplyr)

# Packages on github
devtools::install_github("ivyleavedtoadflax/govstyle")
# or in DfE: download the zip
devtools::install_local("C://govstyle-master.zip")
```

--- .intermezzo

## Getting started on a project

(Some important things you may have never thought about)

* Setting up
* Dependency control
* Making it clear and reproducible

---

## Setting up a project

* Use RStudio projects instead.
  * Avoids use of `setwd()` - required for advanced functionality.
  * File > New Project...
  
  <img src="assets/img/rstudio_project.png" style="display: block; margin-left: auto; margin-right: auto; border-width: 1px; border-colour: #000000;border-style: solid;">

---

## Dependency control

* R is constantly under development (as are packages).
* Changes to packages __can__ break your code.
* __Avoid dependency hell__ with a little planning.

The simplest way: record system info for each project.


```r
.libPaths()
```

```
## [1] "/home/matthew/R/x86_64-pc-linux-gnu-library/3.3"
## [2] "/usr/local/lib/R/site-library"                  
## [3] "/usr/lib/R/site-library"                        
## [4] "/usr/lib/R/library"
```

---

## Dependency control


```r
# Which exact packages are used?
sessionInfo()
```

```
## R version 3.3.0 (2016-05-03)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 14.04.4 LTS
## 
## locale:
##  [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8    
##  [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
##  [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] knitr_1.13.1
## 
## loaded via a namespace (and not attached):
## [1] magrittr_1.5  formatR_1.4   tools_3.3.0   stringi_1.1.1 stringr_1.0.0
## [6] evaluate_0.9
```

---

## Dependency control

A better system for handling dependencies (in most cases).


```r
# Install and load the checkpoint library

install.packages("checkpoint")
library(checkpoint)

# Set a checkpoint for the project

checkpoint("2016-05-22", use.knitr = TRUE)

# Subsequently, you can load this snapshot with:

setSnapshot("2016-05-22")
```

Some packages will need to be installed manually. Watch your disk space!

---

## Reproducibility and Clarity

**The Past is a foreign country, they do things differently there**

* Code is for People (Not Computers).


```r
hard_to_read <- function(x) ifelse(x == 0, NA, x)
```

* Make things readable
* `# Comment liberally`


```r
# Function to replace zero values with NA

better <- function(x) {
  
  ifelse(x == 0, NA, x)
  
}
```

---

## Reproducibility and Clarity

* Be explicit (at least to begin with).


```r
# Function to replace zero values with NA

best <- function(x) {
  
  ifelse(
    test = (x == 0), 
    yes = NA, 
    no = x)
  
}
```

---

## Reproducibility and Clarity

* Reproducible formats:
  * Combine code with narrative in one document.
  * Able to handle increasingly complex documents.
  * Output to html, word, pdf (maybe).

--- .intermezzo

## Walking through a project

* The RStudio environment
* Getting the data in
* Manipulating data
* Producing outputs

---

## The RStudio environment

<img src="assets/img/RStudio.png" style="display: block; height: 550px;">

---

## The RStudio environment


```r
# Assign an object to the name foo

foo <- rnorm(100)

# See which objects are in my environment

ls()
```

```
## [1] "foo"
```

* Beware masking other objects.
* `filter()` exists in package **stats** (loaded by default) and **dplyr** which you must load manually.
* Use `dplyr::filter()` to explicitly call the one of interest.

---

## Getting data in

Data can come from pretty much anywhere:
* Databases.
* Flat files.
* The internet.

---

## Getting data in

### Getting data from SQL server:

[Set up data connection in windows](http://statistical-research.com/wp-content/uploads/2012/09/database-connect.pdf).


```r
# Install and load RODBC
install.packages("RODBC")
library(RODBC)

# Set up a connection to the server
conn <- odbcDriverConnect()

# Get list of tables
sqlTables(conn)
  
# Execute query

sqlQuery(conn, "SELECT top 100 * FROM TABLE")
```

---
  
## Getting data in
  
### Getting data from SQL server:  

For longer queries: better to keep the files in a separate .sql file, and load them into R as required.


```r
read.sql
```

---

## Getting data in
  
### Getting data from flat files:


```r
library(readr)

# Load data from local csv file

lalonde <- read_csv("lalonde.csv")
```

Info about this data <http://users.nber.org/~rdehejia/data/nswdata2.html>

---

## Manipulating data

First look at the data


```r
# Because I used readr::read_csv this is a tbl_df object
lalonde
```

```
##     age educ black hisp married nodegr      re74       re75       re78 u74
## 1    37   11     1    0       1      1     0.000     0.0000  9930.0500   1
## 2    22    9     0    1       0      1     0.000     0.0000  3595.8900   1
## 3    30   12     1    0       0      0     0.000     0.0000 24909.5000   1
## 4    27   11     1    0       0      1     0.000     0.0000  7506.1500   1
## 5    33    8     1    0       0      1     0.000     0.0000   289.7900   1
## 6    22    9     1    0       0      1     0.000     0.0000  4056.4900   1
## 7    23   12     1    0       0      0     0.000     0.0000     0.0000   1
## 8    32   11     1    0       0      1     0.000     0.0000  8472.1600   1
## 9    22   16     1    0       0      0     0.000     0.0000  2164.0200   1
## 10   33   12     0    0       1      0     0.000     0.0000 12418.1000   1
## 11   19    9     1    0       0      1     0.000     0.0000  8173.9100   1
## 12   21   13     1    0       0      0     0.000     0.0000 17094.6000   1
## 13   18    8     1    0       0      1     0.000     0.0000     0.0000   1
## 14   27   10     1    0       1      1     0.000     0.0000 18739.9000   1
## 15   17    7     1    0       0      1     0.000     0.0000  3023.8800   1
## 16   19   10     1    0       0      1     0.000     0.0000  3228.5000   1
## 17   27   13     1    0       0      0     0.000     0.0000 14581.9000   1
## 18   23   10     1    0       0      1     0.000     0.0000  7693.4000   1
## 19   40   12     1    0       0      0     0.000     0.0000 10804.3000   1
## 20   26   12     1    0       0      0     0.000     0.0000 10747.4000   1
## 21   23   11     1    0       0      1     0.000     0.0000     0.0000   1
## 22   41   14     0    0       0      0     0.000     0.0000  5149.5000   1
## 23   38    9     0    0       0      1     0.000     0.0000  6408.9500   1
## 24   24   11     1    0       0      1     0.000     0.0000  1991.4000   1
## 25   18   10     1    0       0      1     0.000     0.0000 11163.2000   1
## 26   29   11     1    0       1      1     0.000     0.0000  9643.0000   1
## 27   25   11     1    0       0      1     0.000     0.0000  9897.0500   1
## 28   27   10     0    1       0      1     0.000     0.0000 11142.9000   1
## 29   17   10     1    0       0      1     0.000     0.0000 16218.0000   1
## 30   24   11     1    0       0      1     0.000     0.0000   995.7000   1
## 31   17   10     1    0       0      1     0.000     0.0000     0.0000   1
## 32   48    4     1    0       0      1     0.000     0.0000  6551.5900   1
## 33   25   11     1    0       1      1     0.000     0.0000  1574.4200   1
## 34   20   12     1    0       0      0     0.000     0.0000     0.0000   1
## 35   25   12     1    0       0      0     0.000     0.0000  3191.7500   1
## 36   42   14     1    0       0      0     0.000     0.0000 20505.9000   1
## 37   25    5     1    0       0      1     0.000     0.0000  6181.8800   1
## 38   23   12     1    0       1      0     0.000     0.0000  5911.5500   1
## 39   46    8     1    0       1      1     0.000     0.0000  3094.1600   1
## 40   24   10     1    0       0      1     0.000     0.0000     0.0000   1
## 41   21   12     1    0       0      0     0.000     0.0000  1254.5800   1
## 42   19    9     0    0       0      1     0.000     0.0000 13188.8000   1
## 43   17    8     1    0       0      1     0.000     0.0000  8061.4900   1
## 44   18    8     0    1       1      1     0.000     0.0000  2787.9600   1
## 45   20   11     1    0       0      1     0.000     0.0000  3972.5400   1
## 46   25   11     1    0       1      1     0.000     0.0000     0.0000   1
## 47   17    8     1    0       0      1     0.000     0.0000     0.0000   1
## 48   17    9     1    0       0      1     0.000     0.0000     0.0000   1
## 49   25    5     1    0       0      1     0.000     0.0000 12187.4000   1
## 50   23   12     1    0       0      0     0.000     0.0000  4843.1800   1
## 51   28    8     1    0       0      1     0.000     0.0000     0.0000   1
## 52   31   11     1    0       1      1     0.000     0.0000  8087.4900   1
## 53   18   11     1    0       0      1     0.000     0.0000     0.0000   1
## 54   25   12     1    0       0      0     0.000     0.0000  2348.9700   1
## 55   30   11     1    0       1      1     0.000     0.0000   590.7820   1
## 56   17   10     1    0       0      1     0.000     0.0000     0.0000   1
## 57   37    9     1    0       0      1     0.000     0.0000  1067.5100   1
## 58   41    4     1    0       1      1     0.000     0.0000  7284.9900   1
## 59   42   14     1    0       1      0     0.000     0.0000 13167.5000   1
## 60   22   11     0    0       0      1     0.000     0.0000  1048.4300   1
## 61   17    8     1    0       0      1     0.000     0.0000     0.0000   1
## 62   29    8     1    0       0      1     0.000     0.0000  1923.9400   1
## 63   35   10     1    0       0      1     0.000     0.0000  4666.2400   1
## 64   27   11     1    0       0      1     0.000     0.0000   549.2980   1
## 65   29    4     1    0       0      1     0.000     0.0000   762.9150   1
## 66   28    9     1    0       0      1     0.000     0.0000 10694.3000   1
## 67   27   11     1    0       0      1     0.000     0.0000     0.0000   1
## 68   23    7     0    0       0      1     0.000     0.0000     0.0000   1
## 69   45    5     1    0       1      1     0.000     0.0000  8546.7200   1
## 70   29   13     1    0       0      0     0.000     0.0000  7479.6600   1
## 71   27    9     1    0       0      1     0.000     0.0000     0.0000   1
## 72   46   13     1    0       0      0     0.000     0.0000   647.2050   1
## 73   18    6     1    0       0      1     0.000     0.0000     0.0000   1
## 74   25   12     1    0       0      0     0.000     0.0000 11965.8000   1
## 75   28   15     1    0       0      0     0.000     0.0000  9598.5400   1
## 76   25   11     0    0       0      1     0.000     0.0000 18783.4000   1
## 77   22   12     1    0       0      0     0.000     0.0000 18678.1000   1
## 78   21    9     1    0       0      1     0.000     0.0000     0.0000   1
## 79   40   11     1    0       0      1     0.000     0.0000 23005.6000   1
## 80   22   11     1    0       0      1     0.000     0.0000  6456.7000   1
## 81   25   12     1    0       0      0     0.000     0.0000     0.0000   1
## 82   18   12     1    0       0      0     0.000     0.0000  2321.1100   1
## 83   38   12     0    0       0      0     0.000     0.0000  4941.8500   1
## 84   27   13     1    0       0      0     0.000     0.0000     0.0000   1
## 85   27    8     1    0       0      1     0.000     0.0000     0.0000   1
## 86   38   11     1    0       0      1     0.000     0.0000     0.0000   1
## 87   23    8     0    1       0      1     0.000     0.0000  3881.2800   1
## 88   26   11     1    0       0      1     0.000     0.0000 17231.0000   1
## 89   21   12     0    0       0      0     0.000     0.0000  8048.6000   1
## 90   25    8     1    0       0      1     0.000     0.0000     0.0000   1
## 91   31   11     1    0       1      1     0.000     0.0000 14509.9000   1
## 92   17   10     1    0       0      1     0.000     0.0000     0.0000   1
## 93   25   11     1    0       0      1     0.000     0.0000     0.0000   1
## 94   21   12     1    0       0      0     0.000     0.0000  9983.7800   1
## 95   44   11     1    0       0      1     0.000     0.0000     0.0000   1
## 96   25   12     0    0       0      0     0.000     0.0000  5587.5000   1
## 97   18    9     1    0       0      1     0.000     0.0000  4482.8500   1
## 98   42   12     1    0       0      0     0.000     0.0000  2456.1500   1
## 99   25   10     1    0       0      1     0.000     0.0000     0.0000   1
## 100  31    9     0    1       0      1     0.000     0.0000 26817.6000   1
## 101  24   10     1    0       0      1     0.000     0.0000     0.0000   1
## 102  26   10     1    0       0      1     0.000     0.0000  9265.7900   1
## 103  25   11     1    0       0      1     0.000     0.0000   485.2300   1
## 104  18   11     1    0       0      1     0.000     0.0000  4814.6300   1
## 105  19   11     1    0       0      1     0.000     0.0000  7458.1100   1
## 106  43    9     1    0       0      1     0.000     0.0000     0.0000   1
## 107  27   13     1    0       0      0     0.000     0.0000 34099.3000   1
## 108  17    9     1    0       0      1     0.000     0.0000  1953.2700   1
## 109  30   11     1    0       0      1     0.000     0.0000     0.0000   1
## 110  26   10     1    0       1      1  2028.000     0.0000     0.0000   0
## 111  20    9     1    0       0      1  6083.990     0.0000  8881.6700   0
## 112  17    9     0    1       0      1   445.170    74.3435  6210.6700   0
## 113  20   12     1    0       0      0   989.268   165.2080     0.0000   0
## 114  18   11     1    0       0      1   858.254   214.5640   929.8840   0
## 115  27   12     1    0       1      0  3670.870   334.0490     0.0000   0
## 116  21   12     0    0       0      0  3670.870   334.0490 12558.0000   0
## 117  27   12     1    0       0      0  2143.410   357.9500 22163.3000   0
## 118  20   12     1    0       0      0     0.000   377.5690  1652.6400   1
## 119  19   10     1    0       0      1     0.000   385.2740  8124.7200   1
## 120  23   12     1    0       0      0  5506.310   501.0740   671.3320   0
## 121  29   14     1    0       0      0     0.000   679.6730 17815.0000   1
## 122  18   10     1    0       0      1     0.000   798.9080  9737.1500   1
## 123  19    9     1    0       0      1     0.000   798.9080 17685.2000   1
## 124  27   13     0    0       1      0  9381.570   853.7230     0.0000   0
## 125  18   11     0    0       0      1  3678.230   919.5580  4321.7100   0
## 126  27    9     1    0       1      1     0.000   934.4450  1773.4200   1
## 127  22   12     1    0       0      0  5605.850   936.1770     0.0000   0
## 128  23   10     1    0       1      1     0.000   936.4390 11233.3000   1
## 129  23   12     0    1       0      0  9385.740  1117.4400   559.4430   0
## 130  20   11     1    0       0      1  3637.500  1220.8400  1085.4400   0
## 131  17    9     1    0       0      1  1716.510  1253.4400  5445.2000   0
## 132  28   11     1    0       0      1     0.000  1284.0800 60307.9000   1
## 133  26   11     1    0       1      1     0.000  1392.8500  1460.3600   1
## 134  20   11     1    0       0      1 16318.600  1484.9900  6943.3400   0
## 135  24   11     1    0       1      1   824.389  1666.1100  4032.7100   0
## 136  31    9     1    0       0      1     0.000  1698.6100 10363.3000   1
## 137  23    8     0    0       1      1     0.000  1713.1500  4232.3100   1
## 138  18   10     1    0       0      1  2143.410  1784.2700 11141.4000   0
## 139  29   12     1    0       0      0 10881.900  1817.2800     0.0000   0
## 140  26   11     0    0       0      1     0.000  2226.2700 13385.9000   1
## 141  24    9     1    0       0      1  9154.700  2288.6800  4849.5600   0
## 142  25   12     1    0       0      0 14426.800  2409.2700     0.0000   0
## 143  24   10     1    0       0      1  4250.400  2421.9500  1660.5100   0
## 144  46    8     1    0       0      1  3165.660  2594.7200     0.0000   0
## 145  31   12     0    0       0      0     0.000  2611.2200  2484.5500   1
## 146  19   11     1    0       0      1  2305.030  2615.2800  4146.6000   0
## 147  19    8     1    0       0      1     0.000  2657.0600  9970.6800   1
## 148  27   11     1    0       0      1  2206.940  2666.2700     0.0000   0
## 149  26   11     1    0       1      1     0.000  2754.6500 26372.3000   1
## 150  20   10     1    0       0      1  5005.730  2777.3600  5615.1900   0
## 151  28   10     1    0       0      1     0.000  2836.5100  3196.5700   1
## 152  24   12     1    0       0      0 13765.800  2842.7600  6167.6800   0
## 153  19    8     1    0       0      1  2636.350  2937.2600  7535.9400   0
## 154  23   12     1    0       0      0  6269.340  3039.9600  8484.2400   0
## 155  42    9     1    0       1      1     0.000  3058.5300  1294.4100   1
## 156  25   13     1    0       0      0 12362.900  3090.7300     0.0000   0
## 157  18    9     1    0       0      1     0.000  3287.3800  5010.3400   1
## 158  21   12     1    0       0      0  6473.680  3332.4100  9371.0400   0
## 159  27   10     1    0       0      1  1001.150  3550.0800     0.0000   0
## 160  21    8     1    0       0      1   989.268  3695.9000  4279.6100   0
## 161  22    9     1    0       0      1  2192.880  3836.9900  3462.5600   0
## 162  31    4     1    0       0      1  8517.590  4023.2100  7382.5500   0
## 163  24   10     1    0       1      1 11703.200  4078.1500     0.0000   0
## 164  29   10     1    0       0      1     0.000  4398.9500     0.0000   1
## 165  29   12     1    0       0      0  9748.390  4878.9400 10976.5000   0
## 166  19   10     0    0       0      1     0.000  5324.1100 13829.6000   1
## 167  19   11     0    1       1      1  5424.490  5463.8000  6788.4600   0
## 168  31    9     1    0       0      1 10717.000  5517.8400  9558.5000   0
## 169  22   10     1    0       1      1  1468.350  5588.6600 13228.3000   0
## 170  21    9     1    0       0      1  6416.470  5749.3300   743.6670   0
## 171  17   10     1    0       0      1  1291.470  5793.8500  5522.7900   0
## 172  26   12     1    0       1      0  8408.760  5794.8300  1424.9400   0
## 173  20    9     0    1       0      1 12260.800  5875.0500  1358.6400   0
## 174  19   10     1    0       0      1  4121.950  6056.7500     0.0000   0
## 175  26   10     1    0       0      1 25929.700  6788.9600   672.8770   0
## 176  28   11     1    0       0      1  1929.030  6871.8600     0.0000   0
## 177  22   12     0    1       1      0   492.231  7055.7000 10092.8000   0
## 178  33   11     1    0       0      1     0.000  7867.9200  6281.4300   1
## 179  22   12     0    0       0      0  6759.990  8455.5000 12590.7000   0
## 180  29   10     0    1       0      1     0.000  8853.6700  5112.0100   1
## 181  33   12     1    0       1      0 20280.000 10941.4000 15952.6000   0
## 182  25   14     1    0       1      0 35040.100 11536.6000 36647.0000   0
## 183  35    9     1    0       1      1 13602.400 13830.6000 12804.0000   0
## 184  35    8     1    0       1      1 13732.100 17976.2000  3786.6300   0
## 185  33   11     1    0       1      1 14660.700 25142.2000  4181.9400   0
## 186  23   10     1    0       0      1     0.000     0.0000     0.0000   1
## 187  26   12     0    0       0      0     0.000     0.0000 12383.7000   1
## 188  22    9     1    0       0      1     0.000     0.0000     0.0000   1
## 189  18    9     1    0       0      1     0.000     0.0000 10740.1000   1
## 190  45   11     1    0       0      1     0.000     0.0000 11796.5000   1
## 191  18    9     1    0       0      1     0.000     0.0000  9227.0500   1
## 192  24    8     0    0       0      1     0.000     0.0000 10569.3000   1
## 193  34   11     1    0       1      1     0.000     0.0000  6040.3400   1
## 194  24    4     0    1       0      1     0.000     0.0000  3880.8300   1
## 195  36   10     1    0       0      1     0.000     0.0000     0.0000   1
## 196  21   14     1    0       0      0     0.000     0.0000  5775.0600   1
## 197  28    9     1    0       0      1     0.000     0.0000     0.0000   1
## 198  27    7     1    0       1      1     0.000     0.0000     0.0000   1
## 199  19   11     0    0       0      1     0.000     0.0000     0.0000   1
## 200  20    8     1    0       0      1     0.000     0.0000     0.0000   1
## 201  34   12     1    0       0      0     0.000     0.0000  2113.7200   1
## 202  24   10     1    0       0      1     0.000     0.0000  7618.6400   1
## 203  22    8     0    1       0      1     0.000     0.0000  9920.9500   1
## 204  25   11     1    0       0      1     0.000     0.0000  4196.3800   1
## 205  39    9     1    0       0      1     0.000     0.0000     0.0000   1
## 206  19    9     1    0       1      1     0.000     0.0000 16658.3000   1
## 207  44    9     1    0       0      1     0.000     0.0000  9722.0000   1
## 208  27    8     1    0       0      1     0.000     0.0000  3783.6600   1
## 209  25    8     1    0       0      1     0.000     0.0000  3515.9300   1
## 210  31   10     1    0       0      1     0.000     0.0000 17014.6000   1
## 211  34   10     1    0       1      1     0.000     0.0000     0.0000   1
## 212  21    7     0    1       0      1     0.000     0.0000     0.0000   1
## 213  33   12     1    0       0      0     0.000     0.0000  5970.2600   1
## 214  18   10     0    1       0      1     0.000     0.0000  1859.1700   1
## 215  26   12     1    0       1      0     0.000     0.0000  6191.9400   1
## 216  31   12     1    0       0      0     0.000     0.0000  7284.3900   1
## 217  35   10     1    0       0      1     0.000     0.0000   445.8310   1
## 218  20   12     1    0       0      0     0.000     0.0000     0.0000   1
## 219  25   11     1    0       0      1     0.000     0.0000     0.0000   1
## 220  25   10     1    0       0      1     0.000     0.0000  7367.0400   1
## 221  35   11     1    0       0      1     0.000     0.0000     0.0000   1
## 222  20   10     1    0       0      1     0.000     0.0000  2015.5000   1
## 223  25    9     0    1       0      1     0.000     0.0000 15791.1000   1
## 224  27   10     1    0       0      1     0.000     0.0000  1135.4700   1
## 225  20   11     0    1       0      1     0.000     0.0000  6378.7200   1
## 226  26   11     1    0       0      1     0.000     0.0000  7176.1900   1
## 227  38    8     1    0       0      1     0.000     0.0000     0.0000   1
## 228  34   10     1    0       0      1     0.000     0.0000  7952.5400   1
## 229  19   12     1    0       0      0     0.000     0.0000     0.0000   1
## 230  32    8     1    0       0      1     0.000     0.0000  7152.1300   1
## 231  20    9     0    1       0      1     0.000     0.0000  8329.8200   1
## 232  23   10     1    0       0      1     0.000     0.0000     0.0000   1
## 233  38   10     1    0       0      1     0.000     0.0000 12429.9000   1
## 234  24   11     1    0       0      1     0.000     0.0000     0.0000   1
## 235  23   11     1    0       0      1     0.000     0.0000  5088.7600   1
## 236  20    7     0    1       0      1     0.000     0.0000  4374.0400   1
## 237  21   11     1    0       0      1     0.000     0.0000  1553.2900   1
## 238  25   10     1    0       0      1     0.000     0.0000     0.0000   1
## 239  22   11     1    0       1      1     0.000     0.0000  1698.3000   1
## 240  23   11     1    0       0      1     0.000     0.0000     0.0000   1
## 241  24   12     0    0       0      0     0.000     0.0000 11294.6000   1
## 242  29   11     1    0       0      1     0.000     0.0000     0.0000   1
## 243  24   11     1    0       0      1     0.000     0.0000 14626.4000   1
## 244  22    9     1    0       0      1     0.000     0.0000 12898.4000   1
## 245  28   11     1    0       0      1     0.000     0.0000  5767.1300   1
## 246  18   10     0    1       0      1     0.000     0.0000  6527.9200   1
## 247  26   10     1    0       0      1     0.000     0.0000  3931.2400   1
## 248  25   10     1    0       0      1     0.000     0.0000 20942.2000   1
## 249  24   10     1    0       0      1     0.000     0.0000     0.0000   1
## 250  26    5     1    0       0      1     0.000     0.0000     0.0000   1
## 251  36   10     1    0       0      1     0.000     0.0000 14690.4000   1
## 252  22   11     1    0       0      1     0.000     0.0000     0.0000   1
## 253  25   12     1    0       0      0     0.000     0.0000  3418.1000   1
## 254  27   11     1    0       0      1     0.000     0.0000 11197.3000   1
## 255  29    8     1    0       0      1     0.000     0.0000     0.0000   1
## 256  24   12     1    0       0      0     0.000     0.0000     0.0000   1
## 257  22   10     1    0       0      1     0.000     0.0000     0.0000   1
## 258  24    7     1    0       0      1     0.000     0.0000  1455.6900   1
## 259  29   12     1    0       0      0     0.000     0.0000  1890.9400   1
## 260  25   11     0    1       1      1     0.000     0.0000  4485.6200   1
## 261  30   12     1    0       0      0     0.000     0.0000 13613.4000   1
## 262  22    8     1    0       0      1     0.000     0.0000  1390.5100   1
## 263  55    3     1    0       0      1     0.000     0.0000  5843.8000   1
## 264  20   10     1    0       0      1     0.000     0.0000  8598.5200   1
## 265  34   11     1    0       0      1     0.000     0.0000  2920.2000   1
## 266  22   12     1    0       0      0     0.000     0.0000     0.0000   1
## 267  32   12     0    1       1      0     0.000     0.0000  6735.3200   1
## 268  31   10     1    0       0      1     0.000     0.0000     0.0000   1
## 269  18    9     1    0       0      1     0.000     0.0000     0.0000   1
## 270  50   10     0    1       0      1     0.000     0.0000     0.0000   1
## 271  25   11     1    0       1      1     0.000     0.0000    44.7555   1
## 272  23   10     1    0       1      1     0.000     0.0000     0.0000   1
## 273  38   10     1    0       0      1     0.000     0.0000     0.0000   1
## 274  25   10     1    0       1      1     0.000     0.0000  3701.8100   1
## 275  42   10     1    0       0      1     0.000     0.0000  6930.3400   1
## 276  39   12     1    0       1      0     0.000     0.0000  3795.8000   1
## 277  34   13     1    0       1      0     0.000     0.0000  5193.2500   1
## 278  24    7     1    0       0      1     0.000     0.0000  2193.5300   1
## 279  32   11     1    0       0      1     0.000     0.0000 11120.5000   1
## 280  27   13     1    0       0      0     0.000     0.0000  7609.5200   1
## 281  26   10     1    0       0      1     0.000     0.0000  2169.0300   1
## 282  44   11     1    0       0      1     0.000     0.0000     0.0000   1
## 283  25   11     1    0       0      1     0.000     0.0000  1264.2300   1
## 284  25   12     1    0       0      0     0.000     0.0000     0.0000   1
## 285  28   12     1    0       1      0     0.000     0.0000     0.0000   1
## 286  32   10     1    0       0      1     0.000     0.0000     0.0000   1
## 287  22   10     1    0       0      1     0.000     0.0000     0.0000   1
## 288  19    9     1    0       0      1     0.000     0.0000  5712.6400   1
## 289  31   10     1    0       1      1     0.000     0.0000     0.0000   1
## 290  23   11     1    0       0      1     0.000     0.0000     0.0000   1
## 291  33   11     1    0       0      1     0.000     0.0000     0.0000   1
## 292  27   10     1    0       0      1     0.000     0.0000  1184.8800   1
## 293  29   11     1    0       1      1     0.000     0.0000 10225.9000   1
## 294  23   10     1    0       0      1     0.000     0.0000     0.0000   1
## 295  25    9     1    0       1      1     0.000     0.0000  4715.3700   1
## 296  25   10     1    0       0      1     0.000     0.0000   289.7900   1
## 297  24   10     1    0       0      1     0.000     0.0000     0.0000   1
## 298  28    8     0    0       0      1     0.000     0.0000  8190.4200   1
## 299  26    6     1    0       0      1     0.000     0.0000  4813.0500   1
## 300  30   14     1    0       1      0     0.000     0.0000  7344.6800   1
## 301  25   10     1    0       1      1     0.000     0.0000     0.0000   1
## 302  29   11     1    0       1      1     0.000     0.0000     0.0000   1
## 303  25   12     1    0       1      0     0.000     0.0000     0.0000   1
## 304  28   13     1    0       0      0     0.000     0.0000     0.0000   1
## 305  23   11     1    0       0      1     0.000     0.0000  4350.9100   1
## 306  54   11     1    0       0      1     0.000     0.0000  7812.5200   1
## 307  33    5     0    1       0      1     0.000     0.0000     0.0000   1
## 308  20    8     1    0       0      1     0.000     0.0000  3644.6600   1
## 309  45    9     1    0       0      1     0.000     0.0000  4844.8000   1
## 310  39    6     1    0       0      1     0.000     0.0000     0.0000   1
## 311  26   12     1    0       0      0     0.000     0.0000     0.0000   1
## 312  23   10     1    0       0      1     0.000     0.0000     0.0000   1
## 313  27   12     0    0       0      0     0.000     0.0000 14792.9000   1
## 314  33    9     0    1       1      1     0.000     0.0000     0.0000   1
## 315  25   10     1    0       1      1     0.000     0.0000     0.0000   1
## 316  23    8     1    0       0      1     0.000     0.0000  3746.7000   1
## 317  18    8     1    0       0      1     0.000     0.0000  1568.1500   1
## 318  17    8     1    0       0      1     0.000     0.0000  7010.4400   1
## 319  19    9     0    1       0      1     0.000     0.0000  3811.6800   1
## 320  18    8     0    1       0      1     0.000     0.0000 10798.6000   1
## 321  18   11     1    0       0      1     0.000     0.0000  4657.2700   1
## 322  17   11     1    0       0      1     0.000     0.0000  8551.5300   1
## 323  19   10     1    0       0      1     0.000     0.0000  4309.8800   1
## 324  19   10     1    0       0      1     0.000     0.0000  5286.4000   1
## 325  18    9     1    0       0      1     0.000     0.0000 12486.2000   1
## 326  18    9     1    0       0      1     0.000     0.0000 10877.4000   1
## 327  18   10     1    0       0      1     0.000     0.0000   202.2850   1
## 328  17   10     1    0       0      1     0.000     0.0000  2657.7100   1
## 329  18    7     1    0       0      1     0.000     0.0000  4132.5800   1
## 330  18   11     1    0       0      1     0.000     0.0000 11303.1000   1
## 331  19   10     0    1       0      1     0.000     0.0000     0.0000   1
## 332  18    9     1    0       0      1     0.000     0.0000     0.0000   1
## 333  17   10     1    0       0      1     0.000     0.0000     0.0000   1
## 334  17   10     1    0       0      1     0.000     0.0000  2189.4300   1
## 335  19   11     1    0       0      1     0.000     0.0000     0.0000   1
## 336  17    8     0    0       0      1     0.000     0.0000 10211.0000   1
## 337  18   10     1    0       0      1     0.000     0.0000 11048.1000   1
## 338  18    9     1    0       0      1     0.000     0.0000     0.0000   1
## 339  17    8     1    0       0      1     0.000     0.0000  8993.8700   1
## 340  19    6     0    1       0      1     0.000     0.0000  5071.8000   1
## 341  19   10     0    0       0      1     0.000     0.0000  3194.0100   1
## 342  17   11     0    0       0      1     0.000     0.0000     0.0000   1
## 343  20    9     1    0       0      1     0.000     0.0000  5193.0900   1
## 344  17    9     1    0       0      1     0.000     0.0000     0.0000   1
## 345  17   10     1    0       0      1     0.000     0.0000   275.5660   1
## 346  17    9     1    0       0      1     0.000     0.0000  3590.7000   1
## 347  19   11     1    0       0      1     0.000     0.0000     0.0000   1
## 348  19   10     1    0       1      1     0.000     0.0000 12797.7000   1
## 349  20    9     1    0       0      1     0.000     0.0000  2035.9100   1
## 350  18    9     1    0       0      1     0.000     0.0000  2389.6800   1
## 351  18   11     1    0       0      1     0.000     0.0000     0.0000   1
## 352  17   10     0    1       0      1     0.000     0.0000  8469.2800   1
## 353  19   11     1    0       0      1     0.000     0.0000     0.0000   1
## 354  17   10     1    0       0      1     0.000     0.0000  1143.3900   1
## 355  17    9     0    1       0      1     0.000     0.0000  5114.8100   1
## 356  18   10     1    0       0      1     0.000     0.0000   781.2240   1
## 357  21    9     1    0       0      1   591.499     0.0000  3343.2200   0
## 358  18   10     1    0       0      1  1563.250     0.0000  9602.4400   0
## 359  19   11     1    0       0      1  1626.620     0.0000     0.0000   0
## 360  24    9     1    0       0      1  2788.500     0.0000 16461.6000   0
## 361  28   11     0    1       1      1  3472.950     0.0000  6771.6200   0
## 362  25   11     1    0       0      1  5281.250     0.0000     0.0000   0
## 363  21    7     1    0       0      1 33800.000     0.0000 11011.6000   0
## 364  39   11     1    0       0      1     0.000    83.6896     0.0000   1
## 365  36   12     1    0       0      0     0.000   142.3970     0.0000   1
## 366  24   12     1    0       0      0     0.000   159.8850     0.0000   1
## 367  17   11     1    0       0      1   989.268   165.2080  4251.1300   0
## 368  18   10     1    0       0      1   960.427   240.1070  2891.6700   0
## 369  18   10     1    0       0      1     0.000   273.5530  5514.3700   1
## 370  28   10     1    0       0      1  1471.290   367.8230  4858.9000   0
## 371  27   13     0    0       0      0  5214.310   474.5020  4812.5800   0
## 372  31   12     0    0       0      0     0.000   494.6430     0.0000   1
## 373  22    9     1    0       0      1     0.000   506.4080   604.1990   1
## 374  31   10     1    0       0      1     0.000   520.4460 14527.9000   1
## 375  26   10     1    0       1      1  6140.370   558.7730     0.0000   0
## 376  18    9     0    0       0      1     0.000   559.5960  7300.5000   1
## 377  23   11     1    0       0      1  6382.310   580.7900     0.0000   0
## 378  20   12     1    0       0      0     0.000   591.8150  4159.9200   1
## 379  19   10     1    0       0      1     0.000   604.1540     0.0000   1
## 380  18   11     1    0       0      1  1064.700   645.2720  5497.5900   0
## 381  17   10     1    0       0      1     0.000   664.5690     0.0000   1
## 382  27   12     1    0       1      0     0.000   752.3900     0.0000   1
## 383  27   11     1    0       0      1  3065.190   766.2990     0.0000   0
## 384  28   12     0    0       0      0     0.000   803.3430 16477.0000   1
## 385  28   11     1    0       0      1  2431.950   863.4800     0.0000   0
## 386  21   10     1    0       0      1  6661.060  1162.3600 39483.5000   0
## 387  17   10     0    1       0      1  4905.120  1168.9000 11306.3000   0
## 388  26   11     1    0       0      1  4699.960  1174.9900  6672.0200   0
## 389  29    9     1    0       0      1     0.000  1203.8200  9378.6500   1
## 390  17   10     0    1       0      1  1203.610  1239.6300  5088.9900   0
## 391  22   11     1    0       0      1  7914.130  1321.6600  2639.2900   0
## 392  24   11     1    0       0      1     0.000  1327.9900  9495.9000   1
## 393  20   12     1    0       0      0   557.699  1371.4700 20893.1000   0
## 394  18   12     1    0       0      0     0.000  1405.5100     0.0000   1
## 395  24   11     0    0       0      1  2669.730  1468.3800 10361.7000   0
## 396  21    9     0    0       0      1  2988.410  1577.1700  1740.2000   0
## 397  30    8     1    0       0      1     0.000  1706.6600     0.0000   1
## 398  31   11     1    0       0      1 17711.900  1726.4500     0.0000   0
## 399  17   10     0    1       0      1  1442.680  1734.5600  6354.1900   0
## 400  19    9     1    0       0      1  8409.630  1778.0900  7171.0000   0
## 401  23   11     1    0       0      1     0.000  1896.0200  5573.5500   1
## 402  22   12     1    0       0      0  4380.020  2003.6800   439.6880   0
## 403  29   12     1    0       0      0 22859.400  2080.2100 16970.0000   0
## 404  22   10     1    0       0      1     0.000  2174.9600  5344.0200   1
## 405  29   13     1    0       0      0   718.249  2265.5800  2725.3200   0
## 406  19   11     1    0       0      1   721.341  2445.5900  9772.2800   0
## 407  17    9     1    0       0      1     0.000  2595.2700     0.0000   1
## 408  18   10     1    0       0      1  1716.510  2682.1300     0.0000   0
## 409  19   12     1    0       0      0  8417.000  2814.2000  1720.9100   0
## 410  20    6     1    0       0      1  6006.880  2850.6100     0.0000   0
## 411  33   11     1    0       0      1 10523.800  2899.8200 18859.9000   0
## 412  36   11     0    1       0      1  5443.730  3063.8800  1324.5400   0
## 413  25   11     1    0       0      1 15210.000  3072.7300   284.6580   0
## 414  19   11     1    0       0      1  3504.010  3285.6800 11195.9000   0
## 415  23    8     1    0       0      1  7724.280  3403.0600     0.0000   0
## 416  17   11     1    0       0      1  4080.730  3796.0300     0.0000   0
## 417  43   10     1    0       0      1  2502.870  4128.4400  7565.2700   0
## 418  26   11     1    0       1      1     0.000  4184.7300     0.0000   1
## 419  27   11     1    0       1      1     0.000  4491.8800     0.0000   1
## 420  19   11     1    0       0      1  6337.490  4503.0600     0.0000   0
## 421  28   11     1    0       1      1  8593.160  5393.9000  4974.5900   0
## 422  28   12     1    0       1      0 10585.100  5551.4600 12780.0000   0
## 423  26    8     1    0       0      1  1126.290  5562.6000  3523.5800   0
## 424  31   12     1    0       0      0     0.000  5613.9100     0.0000   1
## 425  23   11     1    0       0      1  7617.360  5716.4100 10274.8000   0
## 426  20   12     1    0       0      0  7182.490  6004.7300  4779.7200   0
## 427  28   10     1    0       1      1  8293.350  6449.4800 16988.2000   0
## 428  39   12     1    0       1      0 19785.300  6608.1400   499.2570   0
## 429  21    8     1    0       0      1 39570.700  6608.3000  3083.5800   0
## 430  22   11     1    0       0      1  8810.070  6974.4800  3708.7200   0
## 431  20   11     1    0       0      1  8009.160  7666.8800  7659.2200   0
## 432  21   11     0    1       0      1  2992.530  8920.4700 20857.8000   0
## 433  23   12     0    1       0      0  5721.700  8960.6800  7078.1800   0
## 434  29    9     1    0       0      1  9268.940  9160.6900     0.0000   0
## 435  28    9     1    0       1      1 10222.400  9210.4500  1239.8400   0
## 436  30   11     1    0       1      1     0.000  9311.9400  3982.8000   1
## 437  25   10     1    0       1      1 13520.000  9319.4400     0.0000   0
## 438  28   11     1    0       1      1   824.389 10033.9000     0.0000   0
## 439  22   10     0    0       0      1 27864.400 10598.7000  7094.9200   0
## 440  44    9     1    0       1      1 12260.800 10857.2000 12359.3000   0
## 441  21    9     1    0       0      1 31886.400 12357.2000     0.0000   0
## 442  28   11     1    0       0      1 17491.500 13371.3000     0.0000   0
## 443  29    9     0    1       0      1  9594.310 16341.2000 16900.3000   0
## 444  25    9     1    0       1      1 24731.600 16946.6000  7343.9600   0
## 445  22   10     0    0       1      1 25720.900 23032.0000  5448.8000   0
##     u75 treat
## 1     1     1
## 2     1     1
## 3     1     1
## 4     1     1
## 5     1     1
## 6     1     1
## 7     1     1
## 8     1     1
## 9     1     1
## 10    1     1
## 11    1     1
## 12    1     1
## 13    1     1
## 14    1     1
## 15    1     1
## 16    1     1
## 17    1     1
## 18    1     1
## 19    1     1
## 20    1     1
## 21    1     1
## 22    1     1
## 23    1     1
## 24    1     1
## 25    1     1
## 26    1     1
## 27    1     1
## 28    1     1
## 29    1     1
## 30    1     1
## 31    1     1
## 32    1     1
## 33    1     1
## 34    1     1
## 35    1     1
## 36    1     1
## 37    1     1
## 38    1     1
## 39    1     1
## 40    1     1
## 41    1     1
## 42    1     1
## 43    1     1
## 44    1     1
## 45    1     1
## 46    1     1
## 47    1     1
## 48    1     1
## 49    1     1
## 50    1     1
## 51    1     1
## 52    1     1
## 53    1     1
## 54    1     1
## 55    1     1
## 56    1     1
## 57    1     1
## 58    1     1
## 59    1     1
## 60    1     1
## 61    1     1
## 62    1     1
## 63    1     1
## 64    1     1
## 65    1     1
## 66    1     1
## 67    1     1
## 68    1     1
## 69    1     1
## 70    1     1
## 71    1     1
## 72    1     1
## 73    1     1
## 74    1     1
## 75    1     1
## 76    1     1
## 77    1     1
## 78    1     1
## 79    1     1
## 80    1     1
## 81    1     1
## 82    1     1
## 83    1     1
## 84    1     1
## 85    1     1
## 86    1     1
## 87    1     1
## 88    1     1
## 89    1     1
## 90    1     1
## 91    1     1
## 92    1     1
## 93    1     1
## 94    1     1
## 95    1     1
## 96    1     1
## 97    1     1
## 98    1     1
## 99    1     1
## 100   1     1
## 101   1     1
## 102   1     1
## 103   1     1
## 104   1     1
## 105   1     1
## 106   1     1
## 107   1     1
## 108   1     1
## 109   1     1
## 110   1     1
## 111   1     1
## 112   0     1
## 113   0     1
## 114   0     1
## 115   0     1
## 116   0     1
## 117   0     1
## 118   0     1
## 119   0     1
## 120   0     1
## 121   0     1
## 122   0     1
## 123   0     1
## 124   0     1
## 125   0     1
## 126   0     1
## 127   0     1
## 128   0     1
## 129   0     1
## 130   0     1
## 131   0     1
## 132   0     1
## 133   0     1
## 134   0     1
## 135   0     1
## 136   0     1
## 137   0     1
## 138   0     1
## 139   0     1
## 140   0     1
## 141   0     1
## 142   0     1
## 143   0     1
## 144   0     1
## 145   0     1
## 146   0     1
## 147   0     1
## 148   0     1
## 149   0     1
## 150   0     1
## 151   0     1
## 152   0     1
## 153   0     1
## 154   0     1
## 155   0     1
## 156   0     1
## 157   0     1
## 158   0     1
## 159   0     1
## 160   0     1
## 161   0     1
## 162   0     1
## 163   0     1
## 164   0     1
## 165   0     1
## 166   0     1
## 167   0     1
## 168   0     1
## 169   0     1
## 170   0     1
## 171   0     1
## 172   0     1
## 173   0     1
## 174   0     1
## 175   0     1
## 176   0     1
## 177   0     1
## 178   0     1
## 179   0     1
## 180   0     1
## 181   0     1
## 182   0     1
## 183   0     1
## 184   0     1
## 185   0     1
## 186   1     0
## 187   1     0
## 188   1     0
## 189   1     0
## 190   1     0
## 191   1     0
## 192   1     0
## 193   1     0
## 194   1     0
## 195   1     0
## 196   1     0
## 197   1     0
## 198   1     0
## 199   1     0
## 200   1     0
## 201   1     0
## 202   1     0
## 203   1     0
## 204   1     0
## 205   1     0
## 206   1     0
## 207   1     0
## 208   1     0
## 209   1     0
## 210   1     0
## 211   1     0
## 212   1     0
## 213   1     0
## 214   1     0
## 215   1     0
## 216   1     0
## 217   1     0
## 218   1     0
## 219   1     0
## 220   1     0
## 221   1     0
## 222   1     0
## 223   1     0
## 224   1     0
## 225   1     0
## 226   1     0
## 227   1     0
## 228   1     0
## 229   1     0
## 230   1     0
## 231   1     0
## 232   1     0
## 233   1     0
## 234   1     0
## 235   1     0
## 236   1     0
## 237   1     0
## 238   1     0
## 239   1     0
## 240   1     0
## 241   1     0
## 242   1     0
## 243   1     0
## 244   1     0
## 245   1     0
## 246   1     0
## 247   1     0
## 248   1     0
## 249   1     0
## 250   1     0
## 251   1     0
## 252   1     0
## 253   1     0
## 254   1     0
## 255   1     0
## 256   1     0
## 257   1     0
## 258   1     0
## 259   1     0
## 260   1     0
## 261   1     0
## 262   1     0
## 263   1     0
## 264   1     0
## 265   1     0
## 266   1     0
## 267   1     0
## 268   1     0
## 269   1     0
## 270   1     0
## 271   1     0
## 272   1     0
## 273   1     0
## 274   1     0
## 275   1     0
## 276   1     0
## 277   1     0
## 278   1     0
## 279   1     0
## 280   1     0
## 281   1     0
## 282   1     0
## 283   1     0
## 284   1     0
## 285   1     0
## 286   1     0
## 287   1     0
## 288   1     0
## 289   1     0
## 290   1     0
## 291   1     0
## 292   1     0
## 293   1     0
## 294   1     0
## 295   1     0
## 296   1     0
## 297   1     0
## 298   1     0
## 299   1     0
## 300   1     0
## 301   1     0
## 302   1     0
## 303   1     0
## 304   1     0
## 305   1     0
## 306   1     0
## 307   1     0
## 308   1     0
## 309   1     0
## 310   1     0
## 311   1     0
## 312   1     0
## 313   1     0
## 314   1     0
## 315   1     0
## 316   1     0
## 317   1     0
## 318   1     0
## 319   1     0
## 320   1     0
## 321   1     0
## 322   1     0
## 323   1     0
## 324   1     0
## 325   1     0
## 326   1     0
## 327   1     0
## 328   1     0
## 329   1     0
## 330   1     0
## 331   1     0
## 332   1     0
## 333   1     0
## 334   1     0
## 335   1     0
## 336   1     0
## 337   1     0
## 338   1     0
## 339   1     0
## 340   1     0
## 341   1     0
## 342   1     0
## 343   1     0
## 344   1     0
## 345   1     0
## 346   1     0
## 347   1     0
## 348   1     0
## 349   1     0
## 350   1     0
## 351   1     0
## 352   1     0
## 353   1     0
## 354   1     0
## 355   1     0
## 356   1     0
## 357   1     0
## 358   1     0
## 359   1     0
## 360   1     0
## 361   1     0
## 362   1     0
## 363   1     0
## 364   0     0
## 365   0     0
## 366   0     0
## 367   0     0
## 368   0     0
## 369   0     0
## 370   0     0
## 371   0     0
## 372   0     0
## 373   0     0
## 374   0     0
## 375   0     0
## 376   0     0
## 377   0     0
## 378   0     0
## 379   0     0
## 380   0     0
## 381   0     0
## 382   0     0
## 383   0     0
## 384   0     0
## 385   0     0
## 386   0     0
## 387   0     0
## 388   0     0
## 389   0     0
## 390   0     0
## 391   0     0
## 392   0     0
## 393   0     0
## 394   0     0
## 395   0     0
## 396   0     0
## 397   0     0
## 398   0     0
## 399   0     0
## 400   0     0
## 401   0     0
## 402   0     0
## 403   0     0
## 404   0     0
## 405   0     0
## 406   0     0
## 407   0     0
## 408   0     0
## 409   0     0
## 410   0     0
## 411   0     0
## 412   0     0
## 413   0     0
## 414   0     0
## 415   0     0
## 416   0     0
## 417   0     0
## 418   0     0
## 419   0     0
## 420   0     0
## 421   0     0
## 422   0     0
## 423   0     0
## 424   0     0
## 425   0     0
## 426   0     0
## 427   0     0
## 428   0     0
## 429   0     0
## 430   0     0
## 431   0     0
## 432   0     0
## 433   0     0
## 434   0     0
## 435   0     0
## 436   0     0
## 437   0     0
## 438   0     0
## 439   0     0
## 440   0     0
## 441   0     0
## 442   0     0
## 443   0     0
## 444   0     0
## 445   0     0
```

---

## Manipulating data

Checking data structure


```r
str(lalonde)
```

```
## Classes 'tbl_df', 'tbl' and 'data.frame':	445 obs. of  12 variables:
##  $ age    : int  37 22 30 27 33 22 23 32 22 33 ...
##  $ educ   : int  11 9 12 11 8 9 12 11 16 12 ...
##  $ black  : int  1 0 1 1 1 1 1 1 1 0 ...
##  $ hisp   : int  0 1 0 0 0 0 0 0 0 0 ...
##  $ married: int  1 0 0 0 0 0 0 0 0 1 ...
##  $ nodegr : int  1 1 0 1 1 1 0 1 0 0 ...
##  $ re74   : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ re75   : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ re78   : num  9930 3596 24910 7506 290 ...
##  $ u74    : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ u75    : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ treat  : int  1 1 1 1 1 1 1 1 1 1 ...
```

---

## Manipulating data

Preparing the data


```r
# Change dummy variables to factors: the slow way!

lalonde[,"black"] <- factor(lalonde[,"black"])
lalonde[,"hisp"] <- factor(lalonde[,"hisp"])
lalonde[,"married"] <- factor(lalonde[,"married"])
lalonde[,"nodegr"] <- factor(lalonde[,"nodegr"])
lalonde[,"treat"] <- factor(lalonde[,"treat"])
lalonde[,"nodegr"] <- factor(lalonde[,"nodegr"])
```

---

## Manipulating data

Preparing the data


```r
library(dplyr)

# A quicker way using the pipe (%>%)

lalonde <- lalonde %>%
  mutate_each(
    funs = funs(factor),
    black, hisp, married, nodegr, treat
    )
```

---

## Manipulating data

Preparing the data


```r
rnorm(10, mean = 10)
```

```
##  [1] 10.112230 10.076192 10.536853  6.561151 10.077110  9.479356 10.315357
##  [8]  9.366777  9.699112  8.611698
```

```r
# The pipe passes output from one function to another
rnorm(10, mean = 10) %>% mean %>% round(2)
```

```
## [1] 10.06
```

```r
# In old money, this is:
round(mean(rnorm(10, mean = 10)), 2)
```

```
## [1] 10.22
```

---

## Manipulating data

Preparing the data


```r
str(lalonde)
```

```
## Classes 'tbl_df', 'tbl' and 'data.frame':	445 obs. of  12 variables:
##  $ age    : int  37 22 30 27 33 22 23 32 22 33 ...
##  $ educ   : int  11 9 12 11 8 9 12 11 16 12 ...
##  $ black  : Factor w/ 2 levels "0","1": 2 1 2 2 2 2 2 2 2 1 ...
##  $ hisp   : Factor w/ 2 levels "0","1": 1 2 1 1 1 1 1 1 1 1 ...
##  $ married: Factor w/ 2 levels "0","1": 2 1 1 1 1 1 1 1 1 2 ...
##  $ nodegr : Factor w/ 2 levels "0","1": 2 2 1 2 2 2 1 2 1 1 ...
##  $ re74   : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ re75   : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ re78   : num  9930 3596 24910 7506 290 ...
##  $ u74    : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ u75    : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ treat  : Factor w/ 2 levels "0","1": 2 2 2 2 2 2 2 2 2 2 ...
```

---


## Producing an output


--- .intermezzo

## The long view

* Don't reinvent the wheel
* Functional programming
* Testing your code
* Writing packages

---

## Don't reinvent the wheel

* Your problem is not unique!
* Your first port of call should be google (mine is).
* Defining your problem is a skill.

--- 

## Functional programming

__D__o not __R__epeat __Y__ourself 

---

## Testing

---

## RStudio


--- .intermezzo

## Working with objects and functions

* assignment
* data types
* the workspace
* functions and arguments

---

## Assignment 

Everything in R is an object


--- .intermezzo

## Loading data and getting libraries

* loading data
* libraries

--- .intermezzo

## Rstudio Projects and getting help

* Rstudio projects
* Getting help in R

--- 

### Base R console



---

### RStudio

<img src="assets/img/r_studio.png" style="display: block; height: 550px;">

---

## Installing and using packages

One of the strengths of R is that there are literally thousands of packages available for you to extend the core capabilities of the R statistical environment. 


```r
# This installs the wordcloud package from CRAN
install.packages('wordcloud')
```


## Helping yourself

There is a plethora of general help books available:
<br />
<div style="display: block; margin-left: auto; margin-right: auto">
<img src="assets/img/copy-paste.jpg" height="420">
<img src="assets/img/trying.jpg" height="420">
</div>

---

## Helping yourself

If that doesn't work:
<br />

<div style="display: block; margin-left: auto; margin-right: auto">
<img src="assets/img/google.jpg" height="420">
</div>
