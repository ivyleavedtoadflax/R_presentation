<!DOCTYPE html>
<html>
<head>
  <title>A (very) brief introduction to R</title>
  <meta charset="utf-8">
  <meta name="description" content="A (very) brief introduction to R">
  <meta name="author" content="Matthew Upson PhD">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>A (very) brief introduction to R</h1>
    <h2>June 21 2016</h2>
    <p>Matthew Upson PhD<br/>Data Scientist</p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <article data-timings="">
    <style>

em {
  font-style: italic;
}

strong {
  font-weight: bold;
}

</style>

<h2>Before we start...</h2>

<ul>
<li><p>I can&#39;t teach you much in an hour...</p></li>
<li><p>This session focusses on:</p>

<ul>
<li>Some high level advice you might not hear elsewhere.</li>
<li>A very simple walthrough.</li>
<li>Some advice for the future and where to get help.</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Why R?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>R is free (<a href="https://en.wikipedia.org/wiki/Gratis_versus_libre#.22Free_beer.22_vs_.22free_speech.22_distinction">&quot;free&quot; as in &quot;free speech&quot;, not as in &quot;free beer&quot;</a>).</li>
<li>Growing popularity (part of SQL server 2016).</li>
<li>Can talk to Hadoop and Spark (two very popular &#39;big data&#39; technologies).</li>
<li>Supported by an enormous and active community.</li>
</ul>

<pre><code class="r"># CRAN &#39;vetted&#39; packages
install.packages(&quot;dplyr&quot;)
library(dplyr)

# Packages on github
devtools::install_github(&quot;ivyleavedtoadflax/govstyle&quot;)
# or in DfE: download the zip
devtools::install_local(&quot;C://govstyle-master.zip&quot;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="intermezzo" id="slide-3" style="background:;">
  <hgroup>
    <h2>Getting started on a project</h2>
  </hgroup>
  <article data-timings="">
    <p>(Some important things you may have never thought about)</p>

<ul>
<li>Setting up</li>
<li>Dependency control</li>
<li>Making it clear and reproducible</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Setting up a project</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li><p>Use RStudio projects instead.</p>

<ul>
<li>Avoids use of <code>setwd()</code> - required for advanced functionality.</li>
<li>File &gt; New Project...</li>
</ul>

<p><img src="assets/img/rstudio_project.png" style="display: block; margin-left: auto; margin-right: auto; border-width: 1px; border-colour: #000000;border-style: solid;"></p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Dependency control</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>R is constantly under development (as are packages).</li>
<li>Changes to packages <strong>can</strong> break your code.</li>
<li><strong>Avoid dependency hell</strong> with a little planning.</li>
</ul>

<p>The simplest way: record system info for each project.</p>

<pre><code class="r">.libPaths()
</code></pre>

<pre><code>## [1] &quot;/home/matthew/R/x86_64-pc-linux-gnu-library/3.3&quot;
## [2] &quot;/usr/local/lib/R/site-library&quot;                  
## [3] &quot;/usr/lib/R/site-library&quot;                        
## [4] &quot;/usr/lib/R/library&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>Dependency control</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r"># Which exact packages are used?
sessionInfo()
</code></pre>

<pre><code>## R version 3.3.0 (2016-05-03)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 14.04.4 LTS
## 
## locale:
##  [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=en_GB.UTF-8    
##  [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
##  [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] dplyr_0.4.3
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_0.12.5      codetools_0.2-14 digest_0.6.9     assertthat_0.1  
##  [5] R6_2.1.2         DBI_0.4-1        formatR_1.4      magrittr_1.5    
##  [9] evaluate_0.9     stringi_1.1.1    whisker_0.3-2    tools_3.3.0     
## [13] stringr_1.0.0    markdown_0.7.7   yaml_2.1.13      parallel_3.3.0  
## [17] slidify_0.5      knitr_1.13.1
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Dependency control</h2>
  </hgroup>
  <article data-timings="">
    <p>A better system for handling dependencies (in most cases).</p>

<pre><code class="r"># Install and load the checkpoint library

install.packages(&quot;checkpoint&quot;)
library(checkpoint)

# Set a checkpoint for the project

checkpoint(&quot;2016-05-22&quot;, use.knitr = TRUE)

# Subsequently, you can load this snapshot with:

setSnapshot(&quot;2016-05-22&quot;)
</code></pre>

<p>Some packages will need to be installed manually. Watch your disk space!</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>Reproducibility and Clarity</h2>
  </hgroup>
  <article data-timings="">
    <p><strong>The Past is a foreign country, they do things differently there</strong></p>

<ul>
<li>Code is for People (Not Computers).</li>
</ul>

<pre><code class="r">hard_to_read &lt;- function(x) ifelse(x == 0, NA, x)
</code></pre>

<ul>
<li>Make things readable.</li>
<li><code># Comment liberally</code>.</li>
</ul>

<pre><code class="r"># Function to replace zero values with NA

better &lt;- function(x) {

  ifelse(x == 0, NA, x)

}
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>Reproducibility and Clarity</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Be explicit (at least to begin with).</li>
</ul>

<pre><code class="r"># Function to replace zero values with NA

best &lt;- function(x) {

  ifelse(
    test = (x == 0), 
    yes = NA, 
    no = x)

}
</code></pre>

<p>Note that some of the code in this presentation is not as clear as this so that it fits on a single slide!</p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>Reproducibility and Clarity</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Reproducible formats:

<ul>
<li>Combine code with narrative in one document.</li>
<li>Able to handle increasingly complex documents.</li>
<li>Output to html, word, pdf (maybe).</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="intermezzo" id="slide-11" style="background:;">
  <hgroup>
    <h2>Walking through a project</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>The RStudio environment</li>
<li>Getting the data in</li>
<li>Manipulating data</li>
<li>Producing outputs</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>The RStudio environment</h2>
  </hgroup>
  <article data-timings="">
    <p><img src="assets/img/RStudio.png" style="display: block; height: 550px;"></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>The RStudio environment</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r"># Assign an object to the name foo

foo &lt;- rnorm(100)

# See which objects are in my environment

ls()
</code></pre>

<pre><code>## [1] &quot;encoding&quot;  &quot;foo&quot;       &quot;inputFile&quot;
</code></pre>

<ul>
<li>Beware masking other objects.</li>
<li><code>filter()</code> exists in package <strong>stats</strong> (loaded by default) and <strong>dplyr</strong> which you must load manually.</li>
<li>Use <code>dplyr::filter()</code> to explicitly call the one of interest.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Getting data in</h2>
  </hgroup>
  <article data-timings="">
    <p>Data can come from pretty much anywhere:</p>

<ul>
<li>Databases.</li>
<li>Flat files.</li>
<li>The internet.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Getting data in</h2>
  </hgroup>
  <article data-timings="">
    <h3>Getting data from SQL server:</h3>

<p><a href="http://statistical-research.com/wp-content/uploads/2012/09/database-connect.pdf">Set up data connection in windows</a>.</p>

<pre><code class="r"># Install and load RODBC
install.packages(&quot;RODBC&quot;)
library(RODBC)

# Set up a connection to the server
conn &lt;- odbcDriverConnect(
  &#39;driver={SQL Server};server=3DCPRI-PDB16;database=SWFC_Project;trusted_connection=true&#39;
  )

# Get list of tables
sqlTables(conn, tableType = &quot;TABLE&quot;) 

# Execute query

sqlQuery(conn, &quot;SELECT TOP 10 * FROM TABLE;&quot;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h2>Getting data in</h2>
  </hgroup>
  <article data-timings="">
    <h3>Getting data from SQL server:</h3>

<p>For longer queries: better to keep the files in a separate .sql file, and load them into R as required.</p>

<pre><code class="r">read_sql &lt;- function(sql_file_path) {
  # Check whether the sql file exists
  stopifnot(file.exists(sql_file_path))
  # Read the sql file
  sql &lt;- readChar(sql_file_path, nchar = file.info(path)$size)
  # Return the query text
  return(sql)
}

# Now pass a query to RODBC::sqlQuery

sqlQuery(
  conn,
  read_sql(&quot;C:\\query.sql&quot;)
)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>Getting data in</h2>
  </hgroup>
  <article data-timings="">
    <h3>Getting data from flat files:</h3>

<pre><code class="r">library(readr)

# Load data from local csv file

lalonde &lt;- read_csv(&quot;lalonde.csv&quot;)
</code></pre>

<p>Info about this data <a href="http://users.nber.org/%7Erdehejia/data/nswdata2.html">http://users.nber.org/~rdehejia/data/nswdata2.html</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>Manipulating data</h2>
  </hgroup>
  <article data-timings="">
    <p>First look at the data</p>

<pre><code class="r"># Because I used readr::read_csv this is a tbl_df object
lalonde
</code></pre>

<pre><code>## Source: local data frame [445 x 12]
## 
##      age  educ black  hisp married nodegr  re74  re75     re78   u74   u75
##    (int) (int) (int) (int)   (int)  (int) (dbl) (dbl)    (dbl) (int) (int)
## 1     37    11     1     0       1      1     0     0  9930.05     1     1
## 2     22     9     0     1       0      1     0     0  3595.89     1     1
## 3     30    12     1     0       0      0     0     0 24909.50     1     1
## 4     27    11     1     0       0      1     0     0  7506.15     1     1
## 5     33     8     1     0       0      1     0     0   289.79     1     1
## 6     22     9     1     0       0      1     0     0  4056.49     1     1
## 7     23    12     1     0       0      0     0     0     0.00     1     1
## 8     32    11     1     0       0      1     0     0  8472.16     1     1
## 9     22    16     1     0       0      0     0     0  2164.02     1     1
## 10    33    12     0     0       1      0     0     0 12418.10     1     1
## ..   ...   ...   ...   ...     ...    ...   ...   ...      ...   ...   ...
## Variables not shown: treat (int)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>Manipulating data</h2>
  </hgroup>
  <article data-timings="">
    <p>Preparing the data</p>

<pre><code class="r"># Change dummy variables to factors: the slow way!

lalonde[,&quot;black&quot;] &lt;- factor(lalonde[,&quot;black&quot;])
lalonde[,&quot;hisp&quot;] &lt;- factor(lalonde[,&quot;hisp&quot;])
lalonde[,&quot;married&quot;] &lt;- factor(lalonde[,&quot;married&quot;])
lalonde[,&quot;nodegr&quot;] &lt;- factor(lalonde[,&quot;nodegr&quot;])
lalonde[,&quot;treat&quot;] &lt;- factor(lalonde[,&quot;treat&quot;])
lalonde[,&quot;nodegr&quot;] &lt;- factor(lalonde[,&quot;nodegr&quot;])
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>Manipulating data</h2>
  </hgroup>
  <article data-timings="">
    <p>Preparing the data</p>

<pre><code class="r">library(dplyr)

# A quicker way using the pipe (%&gt;%)

lalonde &lt;- lalonde %&gt;%
  # Use the lalonde dataset
  mutate_each(
    # Apply the following listed functions to...
    funs = funs(factor),
    # The following factors...
    black, hisp, married, nodegr, treat
    )
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>Manipulating data</h2>
  </hgroup>
  <article data-timings="">
    <p>Preparing the data</p>

<pre><code class="r">levels(lalonde$black)
</code></pre>

<pre><code>## [1] &quot;0&quot; &quot;1&quot;
</code></pre>

<pre><code class="r">lalonde
</code></pre>

<pre><code>## Source: local data frame [445 x 12]
## 
##      age  educ  black   hisp married nodegr  re74  re75     re78   u74
##    (int) (int) (fctr) (fctr)  (fctr) (fctr) (dbl) (dbl)    (dbl) (int)
## 1     37    11      1      0       1      1     0     0  9930.05     1
## 2     22     9      0      1       0      1     0     0  3595.89     1
## 3     30    12      1      0       0      0     0     0 24909.50     1
## 4     27    11      1      0       0      1     0     0  7506.15     1
## 5     33     8      1      0       0      1     0     0   289.79     1
## 6     22     9      1      0       0      1     0     0  4056.49     1
## 7     23    12      1      0       0      0     0     0     0.00     1
## 8     32    11      1      0       0      1     0     0  8472.16     1
## 9     22    16      1      0       0      0     0     0  2164.02     1
## 10    33    12      0      0       1      0     0     0 12418.10     1
## ..   ...   ...    ...    ...     ...    ...   ...   ...      ...   ...
## Variables not shown: u75 (int), treat (fctr)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>Manipulating data</h2>
  </hgroup>
  <article data-timings="">
    <p>The pipe (%&gt;%) from package dplyr</p>

<pre><code class="r">rnorm(10, mean = 10)
</code></pre>

<pre><code>##  [1]  9.738485 11.233118 11.040858 10.021327  9.816289  8.780478 10.160161
##  [8]  9.611114 10.411079  7.865035
</code></pre>

<pre><code class="r"># The pipe passes output from one function to another
rnorm(10, mean = 10) %&gt;% mean %&gt;% round(2)
</code></pre>

<pre><code>## [1] 10.25
</code></pre>

<pre><code class="r"># In old money, this is:
round(mean(rnorm(10, mean = 10)), 2)
</code></pre>

<pre><code>## [1] 10.17
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-23" style="background:;">
  <hgroup>
    <h2>Producing an output</h2>
  </hgroup>
  <article data-timings="">
    <p>A simple aggregation</p>

<pre><code class="r"># SELECT AVG(re78) FROM lalonde GROUP BY educ

re78_agg &lt;- lalonde %&gt;%
  # Equivalent to GROUP BY in sql
  group_by(educ) %&gt;%
  # equivalent to AVG(re78) in sql
  summarise(
    re78 = mean(re78)
  )

re78_agg
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-24" style="background:;">
  <hgroup>
    <h2>Producing an output</h2>
  </hgroup>
  <article data-timings="">
    <p>A simple aggregation</p>

<pre><code>## Source: local data frame [14 x 2]
## 
##     educ      re78
##    (int)     (dbl)
## 1      3  5843.800
## 2      4  5172.575
## 3      5  5383.200
## 4      6  1976.970
## 5      7  2910.147
## 6      8  3767.879
## 7      9  5850.919
## 8     10  4827.663
## 9     11  5119.780
## 10    12  5744.598
## 11    13  7249.487
## 12    14 15200.663
## 13    15  9598.540
## 14    16  2164.020
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-25" style="background:;">
  <hgroup>
    <h2>Producing an output</h2>
  </hgroup>
  <article data-timings="">
    <p>Linear regression</p>

<pre><code class="r"># Regression real earnings in 1978 against years of education

re78_model &lt;- lm(re78 ~ educ, data = lalonde)

# Get coefficients

re78_model
</code></pre>

<pre><code>## 
## Call:
## lm(formula = re78 ~ educ, data = lalonde)
## 
## Coefficients:
## (Intercept)         educ  
##       918.2        429.9
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-26" style="background:;">
  <hgroup>
    <h2>Producing an output</h2>
  </hgroup>
  <article data-timings="">
    <p>Linear regression</p>

<h1>What about other stats?</h1>

<pre><code class="r">attributes(re78_model)
</code></pre>

<pre><code>## $names
##  [1] &quot;coefficients&quot;  &quot;residuals&quot;     &quot;effects&quot;       &quot;rank&quot;         
##  [5] &quot;fitted.values&quot; &quot;assign&quot;        &quot;qr&quot;            &quot;df.residual&quot;  
##  [9] &quot;xlevels&quot;       &quot;call&quot;          &quot;terms&quot;         &quot;model&quot;        
## 
## $class
## [1] &quot;lm&quot;
</code></pre>

<pre><code class="r"># Can now call these &#39;slots&#39; with $

re78_model$call
</code></pre>

<pre><code>## lm(formula = re78 ~ educ, data = lalonde)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-27" style="background:;">
  <hgroup>
    <h2>Producing an output</h2>
  </hgroup>
  <article data-timings="">
    <p>Get a more complete summary</p>

<pre><code class="r">summary(re78_model)
</code></pre>

<pre><code>## 
## Call:
## lm(formula = re78 ~ educ, data = lalonde)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
##  -6506  -5097  -1465   3253  54661 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept)    918.2     1807.6   0.508   0.6117  
## educ           429.9      174.6   2.462   0.0142 *
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 6594 on 443 degrees of freedom
## Multiple R-squared:  0.01349,    Adjusted R-squared:  0.01127 
## F-statistic:  6.06 on 1 and 443 DF,  p-value: 0.01421
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-28" style="background:;">
  <hgroup>
    <h2>Plotting</h2>
  </hgroup>
  <article data-timings="">
    <p>Simple plots</p>

<pre><code class="r">plot(
  x = re78_agg$educ,
  y = re78_agg$re78,
  xlab = &quot;Years of education&quot;,
  ylab = &quot;Real earnings in 1978 ($)&quot;
)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-29" style="background:;">
  <hgroup>
    <h2>Plotting</h2>
  </hgroup>
  <article data-timings="">
    <p>Simple plots</p>

<p><img src="assets/fig/simple_plot_plot-1.png" alt="plot of chunk simple_plot_plot"></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-30" style="background:;">
  <hgroup>
    <h2>Plotting</h2>
  </hgroup>
  <article data-timings="">
    <p>Intermediate plotting with ggplot2</p>

<pre><code class="r">library(ggplot2)

lalonde %&gt;%
  # Start with lalonde dataset, pass this to a plot function
  ggplot +
  # Set aesthetic for the whole plot
  aes(
    x = educ,
    y = re78
  ) +
  # Add a layer to the plot
  geom_jitter(aes(col = nodegr)) +
  geom_smooth(method =&quot;lm&quot;, se = FALSE) +
  xlab(&quot;Years of education&quot;) +
  ylab(&quot;Real earnings in 1978 ($)&quot;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-31" style="background:;">
  <hgroup>
    <h2>Plotting</h2>
  </hgroup>
  <article data-timings="">
    <p>Intermediate plotting with ggplot2</p>

<p><img src="assets/fig/ggplot_plot-1.png" alt="plot of chunk ggplot_plot"></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-32" style="background:;">
  <hgroup>
    <h2>Plotting</h2>
  </hgroup>
  <article data-timings="">
    <p>A more gov.uk friendly style</p>

<pre><code class="r">library(ggplot2)
library(govstyle)

re78_agg %&gt;%
  ggplot +
  aes(
    x = educ,
    y = re78
  ) +
  geom_bar(
    stat = &quot;identity&quot;,
    fill = unname(gov_cols[&quot;turquoise&quot;])
  ) + 
  xlab(&quot;Years of education&quot;) +
  ylab(&quot;Real earnings in 1978 ($)&quot;) +
  theme_gov() +
  theme(
    legend.position = &quot;right&quot;,
    legend.key = element_blank()
  )
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-33" style="background:;">
  <hgroup>
    <h2>Plotting</h2>
  </hgroup>
  <article data-timings="">
    <p>A more gov.uk friendly style</p>

<p><img src="assets/fig/ggplot_govstyle_plot-1.png" alt="plot of chunk ggplot_govstyle_plot"></p>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="intermezzo" id="slide-34" style="background:;">
  <hgroup>
    <h2>The long view</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Where to get help</li>
<li>Don&#39;t reinvent the wheel</li>
<li>Getting more advanced</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-35" style="background:;">
  <hgroup>
    <h2>Where to get help</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Start with <code>?lm()</code>.</li>
<li>Google is your friend.</li>
<li>Stack Overflow.</li>
<li><a href="govdatascience.slack.com">govdatascience.slack.com</a></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-36" style="background:;">
  <hgroup>
    <h2>Don&#39;t reinvent the wheel</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Your problem is not unique!</li>
<li>Your first port of call should be google (mine is).</li>
<li>Defining your problem is a skill.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-37" style="background:;">
  <hgroup>
    <h2>Getting more advanced</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Functional programming is the way forward:</li>
</ul>

<pre><code class="r"># Function to replace zero values with NA

best &lt;- function(x) {

  ifelse(
    test = (x == 0), 
    yes = NA, 
    no = x)

}
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-38" style="background:;">
  <hgroup>
    <h2>Getting more advanced</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Functions can be tested</li>
</ul>

<pre><code class="r">library(testthat)

# Check that the output we get matches our expectation

expect_identical(
  # our function replaces zeros with NA - so our first argument we ask our
  # function to do this
  best(c(0,1,2,3,4,5,0)),
  # In the second argument, we give what we expect - the same vector, but with
  # zeros converted to NAs
  c(NA,1,2,3,4,5,NA)
  )
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-39" style="background:;">
  <hgroup>
    <h2>Getting more advanced</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>The next logical step is writing packages.

<ul>
<li>Documentation.</li>
<li>Portability.</li>
<li>Reproducibility.</li>
</ul></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-40" style="background:;">
  <hgroup>
    <h2>Any Questions?</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Apologies for the lightning tour!</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='NA'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Why R?'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Getting started on a project'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Setting up a project'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Dependency control'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Dependency control'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Dependency control'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Reproducibility and Clarity'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Reproducibility and Clarity'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='Reproducibility and Clarity'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Walking through a project'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='The RStudio environment'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='The RStudio environment'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Getting data in'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Getting data in'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Getting data in'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='Getting data in'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='Manipulating data'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='Manipulating data'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Manipulating data'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Manipulating data'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Manipulating data'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='Producing an output'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='Producing an output'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='Producing an output'>
         25
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='Producing an output'>
         26
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='Producing an output'>
         27
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='Plotting'>
         28
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='Plotting'>
         29
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='Plotting'>
         30
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Plotting'>
         31
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='Plotting'>
         32
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='Plotting'>
         33
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='The long view'>
         34
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='Where to get help'>
         35
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='Don&#39;t reinvent the wheel'>
         36
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='Getting more advanced'>
         37
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='Getting more advanced'>
         38
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='Getting more advanced'>
         39
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Any Questions?'>
         40
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>